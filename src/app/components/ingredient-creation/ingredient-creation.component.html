<form #form="ngForm" (ngSubmit)="onSubmit(form)" class="ingredient-form">
  <div class="form-grid">
    <div class="form-group">
      <label for="name">Name</label>
      <input type="text" id="name" name="name" required minlength="2" [(ngModel)]="ingredient.name" #name="ngModel" />
      <div class="error" *ngIf="name.invalid && name.touched">
        <small *ngIf="name.errors?.['required']">Name is required.</small>
        <small *ngIf="name.errors?.['minlength']">Minimum 2 characters.</small>
      </div>
    </div>

    <div class="form-group">
      <label for="portion">Portion</label>
      <input type="text" id="portion" name="portion" required [(ngModel)]="ingredient.portion" #portion="ngModel" />
      <div class="error" *ngIf="portion.invalid && portion.touched">
        <small>Portion is required.</small>
      </div>
    </div>

    <div class="form-group">
      <label for="calories">Calories</label>
      <input type="number" id="calories" name="calories" required min="0" [(ngModel)]="ingredient.calories" #calories="ngModel" />
      <div class="error" *ngIf="calories.invalid && calories.touched">
        <small *ngIf="calories.errors?.['required']">Calories are required.</small>
        <small *ngIf="calories.errors?.['min']">Must be 0 or greater.</small>
      </div>
    </div>

    <div class="form-group">
      <label for="protein">Protein (g)</label>
      <input type="number" id="protein" name="protein" required min="0" step="0.01" [(ngModel)]="ingredient.protein" #protein="ngModel" />
      <div class="error" *ngIf="protein.invalid && protein.touched">
        <small *ngIf="protein.errors?.['required']">Protein is required.</small>
        <small *ngIf="protein.errors?.['min']">Must be 0 or greater.</small>
      </div>
    </div>

    <div class="form-group">
      <label for="fat">Fat (g)</label>
      <input type="number" id="fat" name="fat" required min="0" step="0.01" [(ngModel)]="ingredient.fat" #fat="ngModel" />
      <div class="error" *ngIf="fat.invalid && fat.touched">
        <small *ngIf="fat.errors?.['required']">Fat is required.</small>
        <small *ngIf="fat.errors?.['min']">Must be 0 or greater.</small>
      </div>
    </div>

    <div class="form-group">
      <label for="carbs">Carbohydrates (g)</label>
      <input type="number" id="carbs" name="carbs" required min="0" step="0.01" [(ngModel)]="ingredient.carbs" #carbs="ngModel" />
      <div class="error" *ngIf="carbs.invalid && carbs.touched">
        <small *ngIf="carbs.errors?.['required']">Carbohydrates are required.</small>
        <small *ngIf="carbs.errors?.['min']">Must be 0 or greater.</small>
      </div>
    </div>

    <div class="form-group full-width">
      <label for="foodGroup">Food Group</label>
      <select
        id="foodGroup"
        name="foodGroup"
        required
        [(ngModel)]="ingredient.foodGroupId"
        #foodGroup="ngModel"
      >
        <option [ngValue]="null" disabled>Select a food group</option>
        <option *ngFor="let group of foodGroups" [ngValue]="group.id">
          {{ group.name }}
        </option>
      </select>

      <div class="error" *ngIf="foodGroup.invalid && foodGroup.touched">
        <small>Please select a food group.</small>
      </div>
    </div>
  </div>

  <div class="button-group">
    <button type="submit" class="submit-button" [disabled]="form.invalid">{{ isUpdateMode ? 'Update' : 'Save' }}</button>

    <button type="button" class="cancel-button" (click)="cerrarFormulario()">Cancel</button>
  </div>
</form>
